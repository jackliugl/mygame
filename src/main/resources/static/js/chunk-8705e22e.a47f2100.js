(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8705e22e"],{5286:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main",attrs:{id:"main-content"}},[n("div",{staticClass:"row",staticStyle:{"max-height":"30%","overflow-y":"auto"}},[n("div",{staticClass:"col-md-12"},[n("h3",{attrs:{align:"center"}},[t._v("Welcome to Jack's Drawing Room")]),n("form",[n("div",{staticClass:"form-group"},[n("b-row",[n("b-col",{attrs:{cols:"6"}},[n("label",{attrs:{for:"name"}},[t._v("Your Name:")]),n("b-input",{staticClass:"form-control ml-1",attrs:{type:"text",id:"name",state:t.nameState,placeholder:"Please enter your name here..."},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}}),n("b-form-invalid-feedback",{attrs:{id:"name-feedback"}},[t._v(" Enter at least 3 letters ")])],1),n("b-col",{attrs:{cols:"6"}},[n("b-button",{staticClass:"badge-default ml-1 mr-1",attrs:{block:"",id:"connect",size:"sm",variant:"outline-primary",type:"submit",disabled:1==t.connected||0==t.nameState},on:{click:function(e){return e.preventDefault(),t.connect.apply(null,arguments)}}},[t._v("Join")]),n("b-button",{staticClass:"badge-default ml-1 mr-1",attrs:{block:"",id:"disconnect",variant:"outline-primary",size:"sm",type:"submit",disabled:0==t.connected},on:{click:function(e){return e.preventDefault(),t.disconnect.apply(null,arguments)}}},[t._v(" Leave ")])],1)],1)],1)])])]),n("div",[n("h5",[t._v(" Color Guide "),t.connected?n("span",{staticStyle:{color:"green"}},[t._v("Connected")]):t._e(),t.connected?t._e():n("span",{staticStyle:{color:"red"}},[t._v("Disconnected")])]),n("b-row",[n("b-col",{attrs:{cols:"2"}},[n("div",{staticStyle:{display:"flex"}},[n("colorPicker",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"color",attrs:{disabled:!t.connected,title:"Select custom color"},on:{change:t.selectColor},model:{value:t.strokeStyle,callback:function(e){t.strokeStyle=e},expression:"strokeStyle"}}),n("lineSizeMenu",{attrs:{color:t.strokeStyle,defaultSize:t.lineSize},model:{value:t.lineSize,callback:function(e){t.lineSize=e},expression:"lineSize"}})],1)]),t._l(t.colorList,(function(e,o){return n("b-col",{key:o,staticClass:"color ml-2",style:t.getColorStyle(e),attrs:{cols:"1"},on:{click:function(n){return t.selectColor(e)}}})})),n("b-col",{staticClass:"ml-0",attrs:{cols:"1"}},[n("b-img",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip"}],staticClass:"mt-2 mb-2",staticStyle:{display:"block",margin:"auto"},style:t.getColorStyle(t.background),attrs:{src:"eraser-big.png",title:"Enjoy my eraser, $1/minute"},on:{click:function(e){return t.selectColor(t.background)}}})],1),n("b-col",{attrs:{cols:"1"}},[n("b-button",{staticClass:"color mt-1",attrs:{size:"sm",variant:"primary",disabled:!t.connected},on:{click:function(e){return t.clearCanvas()}}},[t._v("Clear")])],1)],2)],1),n("div",[n("b-row",[n("b-col",{staticStyle:{overflow:"auto"},attrs:{cols:"12"}},[n("canvas",{directives:[{name:"canvas",rawName:"v-canvas"}],ref:"canvas"})])],1)],1)])},i=[],s=n("1da1"),a=(n("96cf"),n("b0c0"),n("eb96")),c=n("cc7d"),r=n.n(c),l=n("c6e1"),u=n.n(l),d=n("fa4f"),f=n("c319"),h={name:"mycanvas",components:{lineSizeMenu:d["a"]},directives:{canvas:a["a"]},data:function(){return{colorList:["red","yellow","pink","skyblue","brown"],strokeStyle:"black",background:"green",name:"jack",connected:!1,sessionID:"",stompClient:null,socket:null,lineSize:5}},watch:{lineSize:function(t){this.$refs.canvas.lineWidth=this.strokeStyle===this.background?30:t}},computed:{nameState:function(){return this.name.length>=3}},mounted:function(){this.strokeStyle="black",this.lineSize=5,this.initCanvas()},methods:{getColorStyle:function(t){var e="height: 30px; border-width: 2px;",n=t===this.strokeStyle&&this.connected?"border-style:solid;background:"+t:"background:"+t;return e+n},clearCanvas:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$bvModal.msgBoxConfirm("Please confirm that you want to clear everything.",{title:"Please Confirm",okVariant:"danger",okTitle:"Yes",cancelTitle:"No",centered:!0});case 2:if(n=e.sent,n){e.next=5;break}return e.abrupt("return");case 5:t.stompClient&&t.stompClient.connected&&(o={name:t.name,clear:!0},t.stompClient.send("/app/canvas",JSON.stringify(o),{}));case 6:case"end":return e.stop()}}),e)})))()},initCanvas:function(){this.$refs.canvas.myname="JACK",this.$refs.canvas.connected=this.connected,this.$refs.canvas.USER_STROKE=this.strokeStyle,this.$refs.canvas.lineWidth=this.strokeStyle===this.background?30:this.lineSize,this.$refs.canvas.style.background=this.background,this.$refs.canvas.sayHello(),this.$refs.canvas.parent=this},selectColor:function(t){this.connected&&(this.strokeStyle=t,this.$refs.canvas.USER_STROKE=this.strokeStyle,this.strokeStyle===this.background?(this.$refs.canvas.style.cursor="url('eraser.png'),pointer",this.$refs.canvas.lineWidth=30):(this.$refs.canvas.style.cursor="pointer",this.$refs.canvas.lineWidth=this.lineSize),console.log(t))},sayHello:function(){console.log("Hello Jack!")},canvasDisabled:function(){return!1},send:function(t){if(t.length>0&&(console.log("Send lines:"+t),this.stompClient&&this.stompClient.connected)){var e={name:this.name,lines:t};this.stompClient.send("/app/canvas",JSON.stringify(e),{})}},connect:function(){var t=this;this.socket=new r.a(f["a"].websocketURL),this.stompClient=u.a.over(this.socket),this.stompClient.connect({},(function(e){console.log(e),t.stompClient.subscribe("/topic/canvas",(function(e){var n=JSON.parse(e.body).name,o=JSON.parse(e.body).sessionID,i=JSON.parse(e.body).lines,s=JSON.parse(e.body).clear;if(!s)return n&&o&&!i?(t.connected||(t.sessionID=o,t.connected=!0,t.initCanvas()),void console.log("user "+n+", session is: "+o)):void t.$refs.canvas.paintLines(i);t.$refs.canvas.clear()})),t.stompClient.send("/app/canvas",JSON.stringify({name:t.name,lines:null}),{})}),(function(e){console.log(e),t.connected=!1,t.initCanvas()}))},disconnect:function(){this.stompClient&&this.stompClient.disconnect(),this.connected=!1,this.initCanvas()}}},v=h,m=(n("6c68"),n("2877")),p=Object(m["a"])(v,o,i,!1,null,null,null);e["default"]=p.exports},"6c68":function(t,e,n){"use strict";n("f8c4")},"99af":function(t,e,n){"use strict";var o=n("23e7"),i=n("d039"),s=n("e8b5"),a=n("861d"),c=n("7b0b"),r=n("50c4"),l=n("8418"),u=n("65f0"),d=n("1dde"),f=n("b622"),h=n("2d00"),v=f("isConcatSpreadable"),m=9007199254740991,p="Maximum allowed index exceeded",b=h>=51||!i((function(){var t=[];return t[v]=!1,t.concat()[0]!==t})),y=d("concat"),S=function(t){if(!a(t))return!1;var e=t[v];return void 0!==e?!!e:s(t)},g=!b||!y;o({target:"Array",proto:!0,forced:g},{concat:function(t){var e,n,o,i,s,a=c(this),d=u(a,0),f=0;for(e=-1,o=arguments.length;e<o;e++)if(s=-1===e?a:arguments[e],S(s)){if(i=r(s.length),f+i>m)throw TypeError(p);for(n=0;n<i;n++,f++)n in s&&l(d,f,s[n])}else{if(f>=m)throw TypeError(p);l(d,f++,s)}return d.length=f,d}})},eb96:function(t,e,n){"use strict";var o=n("5530");n("159b"),n("99af");function i(t){var e=t,n=e.getContext("2d");e.width=800,e.height=400,n.lineJoin="round",n.lineCap="round";var i={x:0,y:0},s=[],a=!1,c=!1;function r(t){if(e.connected&&!e.parent.canvasDisabled()){var n=t.offsetX,o=t.offsetY;c&&(n=t.clientX,o=t.clientY,c=!1),a=!0,i={x:n,y:o}}}function l(){e.parent.canvasDisabled()||a&&(a=!1,d())}function u(t){if(!e.parent.canvasDisabled()&&a){var n=t.offsetX,r=t.offsetY;c&&(n=t.clientX,r=t.clientY,c=!1);var l={x:n,y:r},u={start:Object(o["a"])({},i),stop:Object(o["a"])({},l),color:e.USER_STROKE,width:e.lineWidth};s=s.concat(u),f(u)}}function d(){e.parent.send(s),s=[]}function f(t){n.lineWidth=e.lineWidth;var o=t.stop,s=o.x,a=o.y,c=t.start,r=c.x,l=c.y;n.beginPath(),n.strokeStyle=t.color,n.moveTo(r,l),n.lineTo(s,a),n.stroke(),i={x:s,y:a}}e.sayHello=function(){console.log(e.myname),console.log(e.USER_STROKE),console.log(e.connected),console.log(e.background)},e.clear=function(){n.clearRect(0,0,e.width,e.height)},e.paintLines=function(t){e.parent.sayHello(),t.forEach((function(t){var e=t.stop,o=e.x,i=e.y,s=t.start,a=s.x,c=s.y;n.beginPath(),n.strokeStyle=t.color,n.lineWidth=t.width,n.moveTo(a,c),n.lineTo(o,i),n.stroke()}))},e.addEventListener("mousedown",r),e.addEventListener("mousemove",u),e.addEventListener("mouseup",l),e.addEventListener("mouseleave",l);var h={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",touchcancel:"mouseup"},v=["touchstart","touchmove","touchend","touchcancel"];function m(t,e){var n=t.getBoundingClientRect();return e.touches.length>0?{offsetX:e.touches[0].clientX-n.left,offsetY:e.touches[0].clientY-n.top}:{offsetX:0,offsetY:0}}v.forEach((function(t){e.addEventListener(t,(function(n){if(n.target==e){var o=m(e,n);c=!0;var i=new MouseEvent(h[t],{clientX:o.offsetX,clientY:o.offsetY});e.dispatchEvent(i),n.preventDefault()}}),!1)}))}e["a"]={inserted:i}},f8c4:function(t,e,n){},fa4f:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-dropdown",{staticClass:"mt-2",staticStyle:{background:"white",height:"40px",width:"80px",padding:"0px"},attrs:{id:"dropdown-main",variant:"outline"}},[n("span",{staticStyle:{padding:"0px"},attrs:{slot:"button-content"},slot:"button-content"},[n("div",{style:t.menuStyle(t.currentSize)})]),t._l(t.currentSizeList,(function(e){return n("b-dropdown-item",{key:e,on:{click:function(n){return t.updateValue(e)}}},[n("div",{style:t.menuStyle(e)})])}))],2)],1)},i=[],s={name:"lineSizeMenu",props:["sizeList","color","defaultSize"],data:function(){return{currentSize:0,currentSizeList:[3,5,7,9,11,13,15],currentColor:"black"}},mounted:function(){this.color&&(this.currentColor=this.color),this.sizeList&&(this.currentSizeList=this.sizeList),this.defaultSize&&(this.currentSize=this.defaultSize),0==this.currentSize&&(this.currentSize=this.currentSizeList[0])},methods:{menuStyle:function(t){return this.color&&(this.currentColor=this.color),"background:"+this.currentColor+";width:70px;height:"+t+"px;"},updateValue:function(t){this.currentSize=t,this.$emit("input",t)}}},a=s,c=n("2877"),r=Object(c["a"])(a,o,i,!1,null,null,null);e["a"]=r.exports}}]);
//# sourceMappingURL=chunk-8705e22e.a47f2100.js.map